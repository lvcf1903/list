
var jiajson2 = "[{\"auditor\":\"\",\"spconditions\":\"\",\"maincode\":\"\",\"score\":\"\",\"type\":\"\",\"dotimes\":\"\",\"frzt\":\"\",\"orgcode\":\"\",\"systype\":\"\",\"deptid\":\"\",\"dcode\":\"\",\"grzt\":\"\",\"deptallname\":\"\",\"cntime\":\"2\",\"place\":\"\",\"askphone\":\"\",\"deptname\":\"\",\"frdx\":\"\",\"localid\":\"\",\"promisedays\":\"\",\"complaintphone\":\"\",\"isfree\":\"\",\"commenttimes\":\"\",\"questions\":\"\",\"mostdays\":\"\",\"fdconditions\":\"\",\"i_cataid\":\"\",\"isHaveChildren\":\"\",\"grdx\":\"\",\"qlfrom\":\"\",\"sysurl1\":\"\",\"state\":\"\",\"childcode\":\"\",\"groupname\":\"市行政执法局\",\"date\":\"\",\"id\":\"62ebe790-03ae-49fe-824e-df484b7d1b98\",\"times\":\"\",\"lxmobile\":\"0579-85570036\",\"name\":\"临时占用或者挖掘城市道路审批\",\"domain\":\"\",\"doplace\":\"\",\"sysurl2\":\"\",\"fdtime\":\"20\",\"publish\":\"\",\"sfconditions\":\"\",\"innersteps\":\"\",\"outersteps\":\"\",\"allname\":\"\",\"files\":\"\",\"docode\":\"\",\"jdmobile\":\"0579-85572028\",\"usertype\":\"\",\"starlevel\":\"\",\"iscollect\":\"\",\"sysapp\":\"\",\"secret\":\"\",\"filename\":\"\"},{\"auditor\":\"\",\"spconditions\":\"\",\"maincode\":\"\",\"score\":\"\",\"type\":\"\",\"dotimes\":\"\",\"frzt\":\"\",\"orgcode\":\"\",\"systype\":\"\",\"deptid\":\"\",\"dcode\":\"\",\"grzt\":\"\",\"deptallname\":\"\",\"cntime\":\"20\",\"place\":\"\",\"askphone\":\"\",\"deptname\":\"\",\"frdx\":\"\",\"localid\":\"\",\"promisedays\":\"\",\"complaintphone\":\"\",\"isfree\":\"\",\"commenttimes\":\"\",\"questions\":\"\",\"mostdays\":\"\",\"fdconditions\":\"\",\"i_cataid\":\"\",\"isHaveChildren\":\"\",\"grdx\":\"\",\"qlfrom\":\"\",\"sysurl1\":\"\",\"state\":\"\",\"childcode\":\"\",\"groupname\":\"市建设局（市散装水泥办公室）\",\"date\":\"\",\"id\":\"93713e6a-6ff7-43ff-add3-6bf2b60b5666\",\"times\":\"\",\"lxmobile\":\"0579-85232755、0579-85232756、0579-85232757\",\"name\":\"勘察设计工程师执业资格（一级注册结构工程师和其他专业注册工程师）注册初审（更改、补办证章）\",\"domain\":\"\",\"doplace\":\"\",\"sysurl2\":\"\",\"fdtime\":\"20\",\"publish\":\"\",\"sfconditions\":\"\",\"innersteps\":\"\",\"outersteps\":\"\",\"allname\":\"\",\"files\":\"\",\"docode\":\"\",\"jdmobile\":\"0579-85580038\",\"usertype\":\"\",\"starlevel\":\"\",\"iscollect\":\"\",\"sysapp\":\"\",\"secret\":\"\",\"filename\":\"\"},{\"auditor\":\"\",\"spconditions\":\"\",\"maincode\":\"\",\"score\":\"\",\"type\":\"\",\"dotimes\":\"\",\"frzt\":\"\",\"orgcode\":\"\",\"systype\":\"\",\"deptid\":\"\",\"dcode\":\"\",\"grzt\":\"\",\"deptallname\":\"\",\"cntime\":\"20\",\"place\":\"\",\"askphone\":\"\",\"deptname\":\"\",\"frdx\":\"\",\"localid\":\"\",\"promisedays\":\"\",\"complaintphone\":\"\",\"isfree\":\"\",\"commenttimes\":\"\",\"questions\":\"\",\"mostdays\":\"\",\"fdconditions\":\"\",\"i_cataid\":\"\",\"isHaveChildren\":\"\",\"grdx\":\"\",\"qlfrom\":\"\",\"sysurl1\":\"\",\"state\":\"\",\"childcode\":\"\",\"groupname\":\"市建设局（市散装水泥办公室）\",\"date\":\"\",\"id\":\"95692b13-4088-49e9-8423-cf52232f240f\",\"times\":\"\",\"lxmobile\":\"0579-85232755、0579-85232756、0579-85232757\",\"name\":\"勘察设计工程师执业资格注册（更改、补办证章）\",\"domain\":\"\",\"doplace\":\"\",\"sysurl2\":\"\",\"fdtime\":\"20\",\"publish\":\"\",\"sfconditions\":\"\",\"innersteps\":\"\",\"outersteps\":\"\",\"allname\":\"\",\"files\":\"\",\"docode\":\"\",\"jdmobile\":\"0579-85580038\",\"usertype\":\"\",\"starlevel\":\"\",\"iscollect\":\"\",\"sysapp\":\"\",\"secret\":\"\",\"filename\":\"\"},{\"auditor\":\"\",\"spconditions\":\"\",\"maincode\":\"\",\"score\":\"\",\"type\":\"\",\"dotimes\":\"\",\"frzt\":\"\",\"orgcode\":\"\",\"systype\":\"\",\"deptid\":\"\",\"dcode\":\"\",\"grzt\":\"\",\"deptallname\":\"\",\"cntime\":\"20\",\"place\":\"\",\"askphone\":\"\",\"deptname\":\"\",\"frdx\":\"\",\"localid\":\"\",\"promisedays\":\"\",\"complaintphone\":\"\",\"isfree\":\"\",\"commenttimes\":\"\",\"questions\":\"\",\"mostdays\":\"\",\"fdconditions\":\"\",\"i_cataid\":\"\",\"isHaveChildren\":\"\",\"grdx\":\"\",\"qlfrom\":\"\",\"sysurl1\":\"\",\"state\":\"\",\"childcode\":\"\",\"groupname\":\"市建设局（市散装水泥办公室）\",\"date\":\"\",\"id\":\"256c1862-d7ca-4d22-866f-b39f8d283fc0\",\"times\":\"\",\"lxmobile\":\"0579-85232755、0579-85232756、0579-85232757\",\"name\":\"建筑师执业资格注册（更改、补办证章）\",\"domain\":\"\",\"doplace\":\"\",\"sysurl2\":\"\",\"fdtime\":\"20\",\"publish\":\"\",\"sfconditions\":\"\",\"innersteps\":\"\",\"outersteps\":\"\",\"allname\":\"\",\"files\":\"\",\"docode\":\"\",\"jdmobile\":\"0579-85580038\",\"usertype\":\"\",\"starlevel\":\"\",\"iscollect\":\"\",\"sysapp\":\"\",\"secret\":\"\",\"filename\":\"\"}]";
var example = new Vue({
	el: '#parent',
	data: {
		items: []
	}
})
var dataArray;
var pagenum = 1;

//请求网上预约列表
function requestOrderList(requesttype,colid) {
	if(requesttype == 0 ||requesttype == 1 ) {
		pagenum = 1;
	} else {
		pagenum++;
	}
	var date;
	var requesturl;

	//判断是网上预约 还是网上办证（证明）
	if(onlinetype == "01") { //01网上预约
		date = {
			pagenum: pagenum,
			pagesize: "15" //此字段写死成15不能改，因为后台每页固定放15条数据，pagesize是几就取当前页的前几条数据
		}
		requesturl = overallInterface + "getOrderInfoList.do";
	} else if(onlinetype == "02") { //02 网上办证

		date = {
			phone: wxuserInfo.mobile,
			pagenum: pagenum,
			pagesize: "15", //15的原因同上
			colid: colid //所属的分类id
		}
		requesturl = overallInterface + "getOnlineHandleInfoList.do";

	} else if(onlinetype == "03") { //03 网上证明
		date = {
			pagenum: pagenum,
			pagesize: "15", //15的原因同上
			colid: "2" //所属的分类id
		}
		requesturl = overallInterface + "getOnlineHandleInfoList.do";
	} else if(onlinetype == "04") { //04 快递申请
		date = {
			pagenum: pagenum,
			pagesize: "15", //15的原因同上
			colid: "3" //所属的分类id
		}
		requesturl = overallInterface + "getOnlineHandleInfoList.do";
	}
	document.getElementById('loading').style.display = 'block';
	//菊花
	var opts = {
		//参数列表    
		lines: 10, // loading小块的数量
		length: 10, // 小块的长度
		width: 4, // 小块的宽度
		radius: 8, // 整个圆形的半径
		corners: 1, // 小块的圆角，越大则越圆
		rotate: 0, // loading动画的旋转度数，貌似没什么实际作用
		color: '#ddd', // 颜色
		speed: 1, // 变换速度
		trail: 60, // 余晖的百分比
		shadow: false, // 是否渲染出阴影
		hwaccel: false, // 是否启用硬件加速
		className: 'spinner', // 给loading添加的css样式名
		zIndex: 2e9, // The z-index (defaults to 2000000000)
		top: 'auto', // Top position relative to parent in px
		left: 'auto' // Left position relative to parent in px
	};
	var target = document.getElementById('food');
	var spinner = new Spinner(opts).spin(target);

	//	var wmhurl = "http://111.3.64.238:8090/jmportal/interfaces/";

	//	var json = {
	//		pagenum: pagenum,
	//		pagesize: "15"
	//	};

var json = {
		colid:colid
	};


	myRequest({
		url: overallInterface + 'getQuestionList.do',
		data: json,
		header: '',
		success: function(data) {

			document.getElementById('loading').style.display = 'none';
			//				var obj = JSON.parse(data);

			if(requesttype == 0 || requesttype == 1) { //刷新
				mui('#pullrefresh').pullRefresh().endPullupToRefresh(); 
				if(requesttype == 1){
					mui('#pullrefresh').pullRefresh().endPulldownToRefresh(); //refresh completed
				}
//				
				var  wenti = data;
				if(data.length > 0) { //有数据

					dataArray = [];
					dataArray = wenti;

				} else { //无数据

					dataArray = [];
					//					mui.alert("暂无数据");
				}
				pagenum = 1;
			} else { //加载更多
				mui('#pullrefresh').pullRefresh().endPullupToRefresh(); 
				var  wenti = data.resource[0].resourcetitle;
				if(data.length  > 0) { //有数据

					dataArray = wenti;
				} else {

				}
				mui('#pullrefresh').pullRefresh().endPullupToRefresh(obj.length == 0); //参数为true代表没有更多数据了。
			}

			if(dataArray.length > 0) { //有数据
				example.items = [];

				for(var i = 0; i < dataArray.length; i++) {

					if(onlinetype == "01") {
						//01网上预约
						if(i % 3 == 0) {
							var col = "#6ec2ff"
						} else if(i % 3 == 1) {
							var col = "#ff7f71"
						} else if(i % 3 == 2) {
							var col = "#ffda78"
						}
						example.items.push({
							index: i,
							name:"问："+ dataArray[i].question,
							itemcode: dataArray[i].id,
							department: dataArray[i].groupname,
							color: col,
							dtname: "答："+dataArray[i].answer,
							dttoken: dataArray[i].hallcode

						});
					} 
					//alert(JSON.stringify( example.items)  );
					if(i == 0) {
						document.getElementById("parent").style.display = "block";
					}
				}
				setTimeout(hideDetailTable, 5);

			} else { //无数据

				document.getElementById("badmessage").style.display = "block";
				document.getElementById("listcontent").style.display = "none";
			}
		},
		fail: function(data) {
			document.getElementById('loading').style.display = 'none';
			if(requesttype == 0) { //刷新
				mui('#pullrefresh').pullRefresh().endPulldownToRefresh(); //refresh completed

			} else { //加载更多
				mui('#pullrefresh').pullRefresh().endPullupToRefresh(); //参数为true代表没有更多数据了。
			}
			mui.alert("加载失败");
			document.getElementById("badmessage").style.display = "block";
			document.getElementById("listcontent").style.display = "none";
			
		}
	});

	

}

function hideDetailTable() {
	//onlinetype:01 网上预约  02网上办证  3网上证明
	if(onlinetype == "01") { //网上预约

		var submitBtns = document.getElementsByClassName("submitbtn");

		for(var i = 0; i < submitBtns.length; i++) {
			submitBtns[i].innerHTML = "我要预约";
		}
		var details = document.getElementsByClassName("detailTable");
		for(var i = 0; i < details.length; i++) {
			details[i].style.display = "none";
		}

		var onlinedeclares = document.getElementsByClassName("onlinedeclare");
		for(var i = 0; i < onlinedeclares.length; i++) {
			onlinedeclares[i].style.display = "none";
		}
		var onlineorders = document.getElementsByClassName("onlineorder");
		for(var i = 0; i < onlineorders.length; i++) {
			onlineorders[i].style.display = "block";
		}
	} else { //网上办证
		var submitBtns = document.getElementsByClassName("submitbtn");
		for(var i = 0; i < submitBtns.length; i++) {
			submitBtns[i].innerHTML = "在线办理";
		}
		var details = document.getElementsByClassName("detailTable");
		for(var i = 0; i < details.length; i++) {
			details[i].style.display = "block";
		}
		var onlinedeclares = document.getElementsByClassName("onlinedeclare");
		for(var i = 0; i < onlinedeclares.length; i++) {
			onlinedeclares[i].style.display = "block";
		}
		var onlineorders = document.getElementsByClassName("onlineorder");
		for(var i = 0; i < onlineorders.length; i++) {
			onlineorders[i].style.display = "none";
		}
	}
}

